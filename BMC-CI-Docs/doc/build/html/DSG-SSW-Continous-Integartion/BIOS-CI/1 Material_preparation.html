

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Material preparation &mdash; DSG SSW CI and Automation 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Configuration file" href="2%20Configuration_file.html" />
    <link rel="prev" title="BIOS CI" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> DSG SSW CI and Automation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Getting Started:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../On%20Board/index.html">On-Board</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">DSG SSW Continuous Integration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../SSW-BIOS-BMC-build-and-release-process/index.html">Build and release process</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">BIOS CI</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Material preparation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#where-to-build">(1) Where to build?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#where-to-pull-the-code-to-build">(2)Where to pull the code to build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="2%20Configuration_file.html">Configuration file</a></li>
<li class="toctree-l3"><a class="reference internal" href="3%20Daily_settings.html">Daily settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="4%20BDBA_scan.html">BDBA scan</a></li>
<li class="toctree-l3"><a class="reference internal" href="5%20Klocwork_scan.html">Klocwork scan</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../BMC-CI/index.html">BMC CI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../DSG%20Automation/index.html">DSG SSW Automation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DSG SSW CI and Automation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">DSG SSW Continuous Integration</a> &raquo;</li>
        
          <li><a href="index.html">BIOS CI</a> &raquo;</li>
        
      <li>Material preparation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/DSG-SSW-Continous-Integartion/BIOS-CI/1 Material_preparation.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="material-preparation">
<h1>Material preparation<a class="headerlink" href="#material-preparation" title="Permalink to this headline">¶</a></h1>
<p>Before building, you need to prepare the VM and resource codes branch, that is, it is clear: where to build, and
where to pull the code to build.</p>
<div class="section" id="where-to-build">
<h2>(1) Where to build?<a class="headerlink" href="#where-to-build" title="Permalink to this headline">¶</a></h2>
<p><strong>a.Statistics server information</strong> <br />After the server equipment is in place, the hardware configuration of the equipment needs to be clarified in
order to calculate the number of VMs that can be virtualized.<br />Requirements for each VM: SSD 300G, Memory 16G, CPU 12Cores<br />Intel® Xeon® Platinum 8280 CPU &#64; 2.70GHZ<br />2 CPU<em>28 cores</em>2 threads=112 threads<br />9 VM*12 threads = 108 threads<br />Reserve 4 for the physical machine<br /><strong>For example:</strong><br />This Server remote information:<br />Hostname: J5S0330WF-HV.amr.intel.com<br />Raritan Credentials：<a class="reference external" href="https://10.23.38.14">https://10.23.38.14</a><br />Login: testuser<br />This system is on port 29 of the KVM</p>
<p><img alt="../../_images/1.png" src="../../_images/1.png" />
BMC WebGui IP: 10.23.61.20<br />L: TestUser</p>
<p><strong>b.Creat VM</strong><br />After clarifying the number of built VMs, you can create VMs on the Server as CI agents. The basic process of
creating the VM: Copy the VM image file created by the BIOS CI Team to the server OS, and then create a VM virtual
machine based on the VM image file.
This process has been fully automated by the BIOS CI Team, and the specified build
is triggered on Jenkins. This step can be completed automatically with parameters, and it takes about 2-3h.</p>
<p>The principal person in charge of this step:<br />Zhang, Jianlin(WWID:11392771)<br />Zhang, XuX A(WWID:11860103)</p>
</div>
<div class="section" id="where-to-pull-the-code-to-build">
<h2>(2)Where to pull the code to build<a class="headerlink" href="#where-to-pull-the-code-to-build" title="Permalink to this headline">¶</a></h2>
<p>The BIOS is built and compiled by the code in multiple Git repositories. The BIOS of different platforms comes from
different branches of the same git repository. For a new platform, we need to create a new branch to store the BIOS
source code of the platform. When building the BIOS Image of the platform, pull the source code from this branch
to build and compile.</p>
<p><strong>a. Create a new branch for the EagleStreamPc platform:</strong><br />At present, all source code repositories used in BIOS development &amp; CI in Intel use Edkrepo tool as an interface to
manage related code repositories. When pulling and pushing warehouse code, edkrepo tool is used to operate.<br /><strong>Edkrepo document:</strong><br /><a class="reference external" href="https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center">https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center</a><br />In addition, when creating a new branch, you need to specify the node (commit hash/tag) from which to create the new
branch.<br /><strong>Branch naming rules:</strong><br /><a class="reference external" href="https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/Naming-Conventions.aspx">https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/Naming-Conventions.aspx</a><br />New branch operation related commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edkrepo</span> <span class="n">manifest</span>
</pre></div>
</div>
<p>To view all manifest items managed by edkrepo, find EagleStreamRp</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edkrepo</span> <span class="n">clone</span> <span class="o">&lt;</span><span class="n">workspace</span><span class="o">&gt;</span> <span class="n">EagleStreamRp</span>
</pre></div>
</div>
<p>Download the git repository code associated with EagleStreamRp</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">core</span><span class="o">.</span><span class="n">longpaths</span> <span class="n">true</span>
</pre></div>
</div>
<p>When downloading the warehouse code, some files will be downloaded incorrectly due to the file name being too long.
You need to change the git configuration</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">folderpath</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>After edkrepo is downloaded, it contains five git warehouse codes, Intel, FDBin, EDK2, EDK2-staging, EDK2-platform.
The branch building operation of each warehouse needs to be for a single git warehouse, so switch to the designated
warehouse and create a branch. That is to create branches for five warehouses, five operations are required.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">platform</span><span class="o">/</span><span class="n">eaglestreampc_dsg_main_temp</span> 
<span class="n">EGLSTRM</span><span class="mf">.0</span><span class="o">.</span><span class="n">RPB</span><span class="mf">.0053</span><span class="o">.</span><span class="n">D</span><span class="mf">.11</span>
</pre></div>
</div>
<p>Create a new branch platform/eaglestreampc_dsg_main locally with EGLSTRM.0.RPB.0053.D.11 as the starting point</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">edkrepo</span> <span class="n">shared</span><span class="o">-</span><span class="n">branch</span> <span class="o">--</span><span class="n">create</span><span class="o">-</span><span class="n">platform</span> <span class="n">EaglestreamPc</span> <span class="o">--</span><span class="n">name</span> <span class="n">dsg_main</span> <span class="o">-</span><span class="n">v</span> <span class="o">--</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span> <span class="n">Intel</span>
</pre></div>
</div>
<p>Use the edkrepo shared-branch command to synchronize the local code to the new branch platform/eaglestreampc_dsg_main
of the remote warehouse for the git repository of Intel. At the same time, a branch with the same name will be created
locally. With the –dry-run parameter, you can test whether the shared-barnch command can run successfully,
but it will not actually create a remote branch. After the test can run successfully, you need to remove the <em>make–dry
-run</em> parameter and re-execute the <em>shared-branch</em>command.</p>
<p><strong>b. Related link</strong><br />Permission:<br /><a class="reference external" href="https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/Intel%20UEFI%20Continuous%20Integration%20Center/DOC2717806.aspx">https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/Intel%20UEFI%20Continuous%20Integration%20Center/DOC2717806.aspx</a><br />Edkrepo installation:<br /><a class="reference external" href="https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/Intel%20UEFI%20Continuous%20Integration%20Center/EdkRepo%20Windows%20Installation%20Guide.aspx">https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/Intel%20UEFI%20Continuous%20Integration%20Center/EdkRepo%20Windows%20Installation%20Guide.aspx</a><br />Edkrepo beginner:<br /><a class="reference external" href="https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/EdkRepo-Beginners-Guide.aspx">https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/EdkRepo-Beginners-Guide.aspx</a><br />Edkrepo user guide:<br /><a class="reference external" href="https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/Intel%20UEFI%20Continuous%20Integration%20Center/Doc2359500.aspx">https://intel.sharepoint.com/sites/intel-uefi-continuous-integration-center/SitePages/Intel%20UEFI%20Continuous%20Integration%20Center/Doc2359500.aspx</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="2%20Configuration_file.html" class="btn btn-neutral float-right" title="Configuration file" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="BIOS CI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Ruby.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>